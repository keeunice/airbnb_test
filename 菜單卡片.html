<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Cards</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .container {
            width: 90%;
            margin: 0 auto;
            padding: 20px 0;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .teacard-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            justify-content: start;
        }

        .teacard {
            max-width: 200px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 10px;
            transition: transform 0.3s ease;
        }

        .teacard:hover {
            transform: scale(1.05);
        }

        .teacard img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
        }

        .teacard-content {
            text-align: center;
            padding: 10px 0;
        }

        .teacard-content h3 {
            font-size: 1.1em;
            margin: 0 0 5px;
        }

        .teacard-content p {
            font-size: 1em;
            margin: 0;
            color: #555;
        }
        /* Â∞çË©±Ê°Ü styles */
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 300px;
            max-width: 90%;
            z-index: 1000;
            padding: 20px;
        }

        .modal h3 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .modal p {
            font-size: 18px;
            margin: 10px 0;
        }

        #size {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        #sweetness {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        #ice {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        #quantity-controls {
            display: flex-left;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        #quantity-controls button {
            width: 20px; /* Áµ±‰∏ÄÊåâÈàïÂØ¨Â∫¶ */
            height: 20px; /* Áµ±‰∏ÄÊåâÈàïÈ´òÂ∫¶ */
            font-size: 15px;
            font-weight: bold;
            text-align: center;
            background-color: #3f4851;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #quantity-controls button:hover {
            background-color: #0056b3;
        }

        #quantity-display {
            font-size: 18px;
            font-weight: normal;
            width: 20px;
            text-align: center;
        }

        .price-container span {
            font-size: 1em;
            margin-right: 10px;
            margin-top: 0.5cm;
        }

        .modal #check {
            width: 100%;
            padding: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 0.25cm;
        }

        .modal #check:hover {
            background-color: #0056b3;
        }

        .modal #cancel1 {
            width: 100%;
            padding: 10px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 0.25cm;            
        }

        .modal #cancel1:hover {
            background-color: #b02a37;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }


        /* Ë≥ºÁâ©ËªäÊåâÈàïÊ®£Âºè */
        .cart-button {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background-color: #ff5722;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 101; /* Á¢∫‰øùÂú®ÊúÄ‰∏äÂ±§ */
        }

        .cart-button:hover {
            background-color: #e64a19;
        }

        .cart-button:active {
            background-color: #d84315;
        }


        /* Ë≥ºÁâ©Ëªä Dialog Ê®£Âºè */
        .cart-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 400px;
            max-height: 60%;
            overflow: auto;
            padding: 20px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000; /* Á¢∫‰øù Dialog Âú®Ë≥ºÁâ©ËªäÊåâÈàï‰πã‰∏ä */
        }

        #cart-items-list {
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .cart-item-details {
            flex: 1;
                    }

        .cart-item-details h3 {
            font-size: 18px;
            font-weight: bold;
        }

        .cart-item-details .item-description {
            font-size: 14px;
            margin-top: 5px;
        }

        .cart-item-price {
            text-align: right;
            width: 120px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .quantity-controls button {
            padding: 5px 10px;
            margin: 0 5px;
            cursor: pointer;
        }

        .cart-item-price span {
            font-size: 16px;
            font-weight: bold;
        }


        /* Á¢∫Ë™çËàáÂèñÊ∂àÊåâÈàïÊ®£Âºè */
        .dialog-actions {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            margin-top: 10px;
            background-color: #f4f4f4;
            border-top: 1px solid #ccc;
        }

        .dialog-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        .confirm-button {
            background-color: #4CAF50;
            color: white;
        }

        .confirm-button:hover {
            background-color: #45a049;
        }

        .cancel-button {
            background-color: #f44336;
            color: white;
        }

        .cancel-button:hover {
            background-color: #e53935;
        }

        
    </style>
</head>
<body>
    <!-- Ë≥ºÁâ©ËªäÊåâÈàï -->
    <button id="cart-button" class="cart-button">
     üõí Ë≥ºÁâ©Ëªä
    </button>

    <!-- Ë≥ºÁâ©Ëªä Dialog -->
    <div id="cart-dialog" class="cart-dialog">
        <h2>Ë≥ºÁâ©ËªäÂÖßÂÆπ</h2>
        <div id="cart-items-list"></div>
        <div class="dialog-actions">
            <button id="confirm" class="confirm-button">Á¢∫Ë™ç</button>
            <button id="cancel" class="cancel-button">ÂèñÊ∂à</button>
        </div>
    </div>

    <div class="container">
        <!-- Tea Section -->
        <div class="section">
            <h2 class="section-title">Ëå∂È°û</h2>
            <div class="teacard-row">
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>Á¥ÖËå∂</h3>
                        <p>$10</p>
                    </div>
                    <img src="https://img.ltn.com.tw/Upload/food/page/2016/09/11/160911-3349-0-EqE8q.jpg" alt="Á¥ÖËå∂">
                </div>                                
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>Á∂†Ëå∂</h3>
                        <p>$15</p>
                    </div>
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUuo_pyV9Ka3QbIsNA4XOvEu5yVS_0sh9ehg&s" alt="Á∂†Ëå∂">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÁÉèÈæçËå∂</h3>
                        <p>$25</p>
                    </div>
                    <img src="https://shoplineimg.com/5e8fd3429e08ce003190913d/6135cb25949402002f8911ef/800x.jpg?" alt="Á∂†Ëå∂">
                </div>
            </div>
        </div>

        <!-- Frappuccino Section -->
        <div class="section">
            <h2 class="section-title">ÊòüÂÜ∞Ê®Ç</h2>
            <div class="teacard-row">
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÂèØÂèØÊòüÂÜ∞Ê®Ç</h3>
                        <p>$90</p>
                    </div>
                    <img src="https://i1.momoshop.com.tw/1703734981/goodsimg/0011/806/605/11806605_O_m.webp" alt="ÂèØÂèØÊòüÂÜ∞Ê®Ç">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÂíñÂï°ÊòüÂÜ∞Ê®Ç</h3>
                        <p>$80</p>
                    </div>
                    <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001141659501.jpg" alt="ÂíñÂï°ÊòüÂÜ∞Ê®Ç">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÊäπËå∂ÊòüÂÜ∞Ê®Ç</h3>
                        <p>$95</p>
                    </div>
                    <img src="https://img.pchome.com.tw/cs/items/DBCRL8A900FFZ57/000001_1704041161.jpg" alt="ÊäπËå∂ÊòüÂÜ∞Ê®Ç">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÁÑ¶Á≥ñÊòüÂÜ∞Ê®Ç</h3>
                        <p>$85</p>
                    </div>
                    <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001141919985.jpg" alt="ÁÑ¶Á≥ñÊòüÂÜ∞Ê®Ç">
                </div>                
            </div>
        </div>

        <!-- Latte Section -->
        <div class="section">
            <h2 class="section-title">ÈÇ£Â†§</h2>
            <div class="teacard-row">
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÊøÉÁ∏ÆÂíñÂï°</h3>
                        <p>$80</p>
                    </div>
                    <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001111836332.jpg" alt="ÊøÉÁ∏ÆÈÇ£Â†§">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÁÑ¶Á≥ñÁë™Â•áÊúµ</h3>
                        <p>$100</p>
                    </div>
                    <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001112237837.jpg" alt="ÁÑ¶Á≥ñÁë™Â•áÊúµÈÇ£Â†§">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>Êë©Âç°</h3>
                        <p>$110</p>
                    </div>
                    <img src="https://www.starbucks.com.tw/common/objects/images/product/20230908113144918.jpg" alt="Êë©Âç°ÈÇ£Â†§">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>ÁæéÂºèÂíñÂï°</h3>
                        <p>$85</p>
                    </div>
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTanT6awDgvXbVYOczGb3eQn2aWgWmw0DnD5A&s" alt="ÁæéÂºèÈÇ£Â†§">
                </div>
                <div class="teacard">
                    <div class="teacard-content">
                        <h3>Âç°Â∏ÉÂ•áË´æ</h3>
                        <p>$120</p>
                    </div>
                    <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001110857273.jpg" alt="Âç°Â∏ÉÂ•áË´æ">
                </div>
            </div>
        </div>
    </div>

    <div class="overlay" id="cart-overlay"></div>

    <!-- Modal -->
    <div class="overlay"></div>
    <div class="modal">
        <h3 id="modal-title"></h3>
        <p>Â∞∫ÂØ∏</p>
        <select id="size">
            <option value="‰∏≠ÊùØ">‰∏≠ÊùØ</option>
            <option value="Â§ßÊùØ">Â§ßÊùØ</option>
            <option value="ÁâπÂ§ßÊùØ">ÁâπÂ§ßÊùØ</option>
        </select>
        <p>ÁîúÂ∫¶</p>
        <select id="sweetness">
            <option value="ÁÑ°Á≥ñ">ÁÑ°Á≥ñ</option>
            <option value="ÂæÆÁ≥ñ">ÂçäÁ≥ñ</option>
            <option value="ÂçäÁ≥ñ">ÂæÆÁ≥ñ</option>
            <option value="Â∞ëÁ≥ñ">Â∞ëÁ≥ñ</option>
            <option value="Ê≠£Â∏∏">Ê≠£Â∏∏</option>            
        </select>
        <p>ÂÜ∞Èáè</p>
        <select id="ice">
            <option value="Ê∫´">Ê∫´</option>
            <option value="ÂéªÂÜ∞">ÂéªÂÜ∞</option>
            <option value="ÂæÆÂÜ∞">Â∞ëÂÜ∞</option>
            <option value="Â∞ëÂÜ∞">ÂéªÂÜ∞</option>
            <option value="Ê≠£Â∏∏">Ê≠£Â∏∏</option>            
        </select>
        <p>Êï∏Èáè</p>
        <div id="quantity-controls">
            <button id="decrease">-</button>
            <span id="quantity-display">0</span>
            <button id="increase">+</button>
        </div>
        <div class="price-container">
            <span>ÈáëÈ°çÔºö</span>
            <span id="total-price">$0</span>
        </div>
        <div id="action-buttons">
            <button id="check">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
            <button id="cancel1">ÂèñÊ∂à</button>
        </div>
        
    </div>

    <script>
        const teacards = document.querySelectorAll('.teacard');
        const modal = document.querySelector('.modal');
        const overlay = document.querySelector('.overlay');
        const modalTitle = document.getElementById('modal-title');
        const sizeSelect = document.getElementById('size');
        const sweetnessSelect = document.getElementById('sweetness');
        const iceSelect = document.getElementById('ice');
        const checkButton = document.getElementById('check');
        const cancel1Button = document.getElementById('cancel1');
        const quantityDisplay = document.getElementById('quantity-display');
        const increaseButton = document.getElementById('increase');
        const decreaseButton = document.getElementById('decrease');
        const cartButton = document.getElementById('cart-button');
        const cartDialog = document.getElementById('cart-dialog');
        const cartOverlay = document.getElementById('cart-overlay');
        const cartItemsList = document.getElementById('cart-items-list');
        const cancelButton = document.getElementById('cancel');
        const confirmButton = document.getElementById('confirm');

        const drinks = {
            "Á¥ÖËå∂": 10,
            "Á∂†Ëå∂": 15,
            "ÁÉèÈæçËå∂": 25,
            "ÂèØÂèØÊòüÂÜ∞Ê®Ç": 90,
            "ÂíñÂï°ÊòüÂÜ∞Ê®Ç": 80,
            "ÊäπËå∂ÊòüÂÜ∞Ê®Ç": 95,
            "ÁÑ¶Á≥ñÊòüÂÜ∞Ê®Ç": 85,
            "ÊøÉÁ∏ÆÂíñÂï°": 80,
            "ÁÑ¶Á≥ñÁë™Â•áÊúµ": 100,
            "Êë©Âç°": 110,
            "ÁæéÂºèÂíñÂï°": 85,
            "Âç°Â∏ÉÂ•áË´æ": 120
        };

        const drinkSizePrice = {
            "‰∏≠ÊùØ": 0,
            "Â§ßÊùØ": 10,
            "ÁâπÂ§ßÊùØ": 20
        };

        let quantity = 1;
        let selectedDrink = "";

        // ÊâìÈñãÊ®°ÊÖãÊ°Ü
        teacards.forEach(card => {
            card.addEventListener('click', () => {
                selectedDrink = card.querySelector('h3').textContent; // Áç≤ÂèñÂïÜÂìÅÂêçÁ®±
                modalTitle.textContent = selectedDrink;
                modal.style.display = 'block';
                overlay.style.display = 'block';
                quantity = 1; // ÂàùÂßãÂåñÊï∏Èáè
                sizeSelect.value = ""; // ÈªòË™ç
                sweetnessSelect.value = ""; // ÈªòË™ç
                iceSelect.value = ""; // ÈªòË™ç
                quantityDisplay.textContent = quantity; // Êõ¥Êñ∞È°ØÁ§∫
                updateTotalPrice(); // Êõ¥Êñ∞ÂÉπÊ†ºÈ°ØÁ§∫
            });
        });

        checkButton.addEventListener('click', () => {
            // Ê™¢Êü•ÊòØÂê¶ÈÅ∏Êìá‰∫ÜÊâÄÊúâÂøÖË¶ÅÁöÑÈ†ÖÁõÆ
            let missingItems = [];
            if (!sizeSelect.value) missingItems.push("Â∞∫ÂØ∏");
            if (!sweetnessSelect.value) missingItems.push("ÁîúÂ∫¶");
            if (!iceSelect.value) missingItems.push("ÂÜ∞Èáè");

            if (missingItems.length > 0) {
                alert(`Ë´ãÈÅ∏ÊìáÔºö${missingItems.join("„ÄÅ")}`);
                return; // ‰∏çÂü∑Ë°åÂä†ÂÖ•Ë≥ºÁâ©ËªäÂãï‰Ωú
            }
            addItemToCart();
            modal.style.display = 'none';
            overlay.style.display = 'none';
        });

        cancel1Button.addEventListener('click', closeModal);
        overlay.addEventListener('click', closeModal);

        // Ë®àÁÆóÁ∏ΩÂÉπ
        function calculateTotalPrice() {
            const basePrice = drinks[selectedDrink] || 0;
            const sizePrice = drinkSizePrice[sizeSelect.value] || 0;
            return (basePrice + sizePrice) * quantity;
        }

        // Êõ¥Êñ∞Á∏ΩÂÉπÈ°ØÁ§∫
        function updateTotalPrice() {
            const totalPrice = calculateTotalPrice();
            document.getElementById('total-price').textContent = `$${totalPrice}`;
        }

        increaseButton.addEventListener('click', () => {
            quantity++;
            quantityDisplay.textContent = quantity;
            updateTotalPrice();
        });

        decreaseButton.addEventListener('click', () => {
            if (quantity > 1) {
                quantity--;
                quantityDisplay.textContent = quantity;
                updateTotalPrice();
            }
        });

        // Êõ¥ÊîπÂ∞∫ÂØ∏ÊôÇÊõ¥Êñ∞Á∏ΩÂÉπ
        sizeSelect.addEventListener('change', () => {
            updateTotalPrice();
        });

        function closeModal() {
            modal.style.display = 'none';
            overlay.style.display = 'none';
        }

        cartButton.addEventListener('click', () => {
            showUpdatedCart();
            cartDialog.style.display = 'block';
            cartOverlay.style.display = 'block';
        });

        function addItemToCart() {
            const cartItem = {
                item: selectedDrink,
                size: sizeSelect.value,
                sugar: sweetnessSelect.value,
                ice: iceSelect.value,
                price: calculateTotalPrice(),
                quantity: quantity
            };

            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // Ê™¢Êü•ÊòØÂê¶Â∑≤Â≠òÂú®Áõ∏ÂêåÁöÑÂïÜÂìÅ
            const existingItemIndex = cart.findIndex(item =>
                item.item === cartItem.item &&
                item.size === cartItem.size &&
                item.sugar === cartItem.sugar &&
                item.ice === cartItem.ice
            );

            if (existingItemIndex !== -1) {
                // Â¶ÇÊûúÂ∑≤Â≠òÂú®ÔºåÂ¢ûÂä†Êï∏Èáè
                cart[existingItemIndex].quantity += cartItem.quantity;
            } else {
                // Â¶ÇÊûú‰∏çÂ≠òÂú®ÔºåÊñ∞Â¢ûËá≥Ë≥ºÁâ©Ëªä
                cart.push(cartItem);
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartButton();
        }

        // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÂïÜÂìÅÊï∏Èáè
        function updateItemQuantity(index, action) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let item = cart[index];

            if (action === 'increase') {
                item.quantity++;
            } else if (action === 'decrease' && item.quantity > 1) {
                item.quantity--;
            }

            // Â¶ÇÊûúÊï∏ÈáèÊ∏õËá≥ 0ÔºåÂà™Èô§Ë©≤ÂïÜÂìÅ
            if (item.quantity === 0) {
                cart.splice(index, 1);
            } else {
                // Êõ¥Êñ∞ÂÉπÊ†º
                item.price = (drinks[item.item] + drinkSizePrice[item.size]) * item.quantity;
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartButton();
            showUpdatedCart();
        }

        // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÊåâÈàïÊï∏ÈáèÈ°ØÁ§∫
        function updateCartButton() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartButton.textContent = `Ë≥ºÁâ©Ëªä (${totalQuantity})`;
        }

        // ÂàùÂßãÂåñË≥ºÁâ©ËªäÊåâÈàïÊï∏ÈáèÈ°ØÁ§∫
        document.addEventListener('DOMContentLoaded', () => {
            updateCartButton();
        });

        function showUpdatedCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cartItemsList.innerHTML = '';

            cart.forEach((item, index) => {
                const cartItem = document.createElement('div');
                cartItem.classList.add('cart-item');

                cartItem.innerHTML = `
                    <div class="cart-item-details">
                        <h3>${item.item}</h3>
                        <div class="item-description">
                            ${item.size} / ${item.sugar} / ${item.ice}
                        </div>
                    </div>
                    <div class="cart-item-price">
                        <div class="quantity-controls">
                            <button onclick="updateItemQuantity(${index}, 'decrease')">-</button>
                            <span>${item.quantity}</span>
                            <button onclick="updateItemQuantity(${index}, 'increase')">+</button>
                        </div>
                        <div>ÂÉπÊ†º: $${item.price}</div>
                    </div>
                `;

                cartItemsList.appendChild(cartItem);
            });
        }

        function closeDialog() {   
            cartDialog.style.display = 'none';
            cartOverlay.style.display = 'none';
        }

        confirmButton.addEventListener('click', closeDialog);
        cancelButton.addEventListener('click', closeDialog);
        cartOverlay.addEventListener('click', closeDialog);
    </script>
</body>
</html>